---
title: Creating the Main File
sidebar_position: 1
---

When you're running your bot, all of your code is going to start from a single file. This file is going to be the main file of your bot, and it's going to be the file that you run when you want to start your bot.

Open the `index.js` file you created and add the following code:

```js
import "dotenv/config"
import { Client } from "@buape/carbon"
import { loadCommands, serve } from "@buape/carbon-nodejs"

const client = new Client(
	{
		clientId: process.env.CLIENT_ID,
		publicKey: process.env.PUBLIC_KEY,
		token: process.env.DISCORD_TOKEN
	},
	await loadCommands("commands", __dirname)
)

serve(client, { port: 3000 })
```

Let's go through this step by step to see how it works.

## Importing dotenv

The first thing we need to do is import dotenv. We can do this by using the following code:

```js
import "dotenv/config"
```

This imports dotenv and configures it to use the `.env` file in the root of your project. This file is used to store sensitive information such as your bot token.

## Importing Carbon

After that, we will need to import the Client. We can do this by using the following code:

```js
import { Client } from "carbon"
```

## Creating the Client

Next, we need to create the client. We can do this with the next bit of code:

```js
const client = new Client(
	{
		clientId: process.env.CLIENT_ID!,
		publicKey: process.env.PUBLIC_KEY!,
		token: process.env.DISCORD_TOKEN!
	},
	await loadCommands("commands", __dirname)
)
```

This code creates a new client with the options we need to connect to Discord. We are passing in the `clientId`, `publicKey`, and `token` from the `.env` file. We are also passing in an array of commands that we want to load. 
In a node.js environment, Carbon provides a utility function `loadCommands` that will load all the commands in a given directory. We are passing in the `commands` directory and the `__dirname` variable, which is the directory of the current file.

## Serving the Client

Finally, we need to serve the client. We can do this with the following code:

```js
serve(client, { port: 3000 })
```

This code starts the HTTP client and listens on port 3000. This is the port that Discord will send requests to when a user interacts with your bot.